<template name="measures">
	<div class="row">
		<div class="sixteen wide column" style="padding-bottom:1em">
			<div class="ui list" style="margin-bottom:1em">
				{{> measureTags}}
				{{#AnimateWithVelocity}}
					{{> chart}}
				{{/AnimateWithVelocity}}
				{{#each measures}}
					{{> measureItems}}
				{{/each}}
			</div>
		</div>
	</div>
</template>

<template name="chart">
	<div style="{{#unless display}} display: none; {{/unless}}" class="card" data-animate data-property="opacity" data-duration="500" data-from-value="0" data-to-value="1">
		<div class="ui segment" style="margin-bottom:0.75em">
			<div class="ui vertical segment">
				<p style="font-size: 22.75px;">
					<strong><i class="fa fa-tags"></i> Graph {{#if graphTitle}}- {{graphTitle}} {{/if}}</strong>
				</p>
			</div>
			<div class="ui vertical segment">
				<div class="card-body" style="text-align: left;">
					<div id="placeholder" style=" width: 100%; height: 300px "></div>
					<div id="legendholder"></div>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="measureTags">
	<div class="ui segment">
		<div class="ui vertical segment">
			<p style="font-size: 2em;">
				<strong><i class="fa fa-tags"></i> Measures</strong>
			</p>
		</div>
		<div class="ui labels" style="font-size:10pt;margin-top:1.5em">
			{{#each tags}}
				{{#if type}}
					<div type="button" class="ui twitter-blue label pointer tagFilter {{selected}} {{active}}" style="width:fit-content; background-color:#b2ebf2">
						<strong>{{type}}</strong>
						<div class="detail">{{count}}</div>
					</div>
				{{else}}
					<div type="button" class="ui twitter-blue label pointer tagFilter {{allSelected}} {{active}}" style="width:fit-content; background-color:#b2ebf2">
						<strong>All</strong>
						<div class="detail">{{count}}</div>
					</div>
				{{/if}}
			{{/each}}
		</div>
	</div>
</template>

<template name="measureItems">
	{{#AnimateWithVelocity}}
	<div class="ui segment {{#if problemSubject}} twitter-orange {{else}} twitter-blue {{/if}}" style="background-color:#5BC0DE; color:#000000; margin-top:0em;margin-bottom:0.5em">
		<div class="item" data-animate data-property="opacity, translateY" data-duration="500" data-from-value="0,-200px" data-to-value="1,0" style="padding:0">
			<div class="twitter" style="margin:auto">
				<div class="twitter-left twitter-blue {{#if problemSubject}} twitter-orange {{/if}}">
					<div class="ui list" style="padding:0em; padding-right:1em">
						<div class="item" style="font-size: 12pt">
							<i class="fa fa-bar-chart-o"></i> <strong>{{type}}</strong>
						</div>
						{{#if problemSubject}}
						<div class="item" style="font-size: 12pt;">
							<a href="#" class="label"><i class="fa fa-times"></i>&nbsp;<strong>{{problemSubject}}</strong></a>
						</div>
						{{/if}}
						<div class="item">
							{{> measuresAccordion}}
						</div>
					</div>

				</div>
				<div class="twitter-right" style="position:relative; padding:1em">
					<div class="ui list" style="padding:0em; font-size:12pt">
						{{#each fields}}
						<div class="item">
							{{#if unit}}
							<strong>{{type}}:</strong> {{value}}{{unit}}
							{{else}}
							<strong>{{type}}:</strong> {{checkbox}}
							{{/if}}
						</div>
						{{/each}}
					</div>
					<div style="opacity: 0.5;text-align: right; font-size:12pt; position:absolute; border-left:1em; border-top:1em; bottom:0.5em; right:0.5em">
						{{#if noPatientSelected}}
						<i class="fa fa-user"></i><strong> {{patientName}}</strong> {{bed}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{/if}}<i class="fa fa-plus-square"></i> {{nurseName}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-clock-o"></i> {{date}}
					</div>
				</div>
			</div>
		</div>
	</div>
	{{/AnimateWithVelocity}}
</template>

<template name="measuresAccordion">
	<div class="ui accordion">
		<div class="title">
			{{#if opened}}
			<i class="angle double down icon" style="overflow: hidden; white-space: nowrap; align-self:auto; font-size: 17pt; color: #FFFFFF"></i>	
			{{else}}
			<i class="angle double right icon" style="font-size: 17pt; color: #FFFFFF"></i>
			{{/if}}
		</div>
		<div class="content" style="padding-bottom: 10px;">
			<div class="ui list" style="padding:0em">
				{{#unless problemSubject}}
				<div class="item" style="padding-bottom:0em; margin-bottom:0.5em">
					<select data-native-menu="false" style="color:#000000">
						<option data-problemId="" value="">Select...</option>
						{{#each problems}}
						<option data-problemId="{{_id}}" value="{{subject}}">{{subject}}</option>
						{{/each}}
					</select>
				</div>
				<div class="item" style="padding-top:0em;">
					<div class="ui inverted twitter-red button delete">
						<i class="fa fa-times"></i> Delete
					</div>
				</div>
				{{/unless}}
			</div>
		</div>
	</div>
</template>