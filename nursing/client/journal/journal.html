<template name="journal">
	<div class="row">
		<div class="sixteen wide column">
			{{#each journals}}
			{{> journalItems}}
			{{/each}}
		</div>
	</div>
	{{> space}}
</template>

<template name="journalItems">
	{{#AnimateWithVelocity}}
	<div class="ui segment twitter-blue {{#if subject}} twitter-red {{/if}} {{#if problemSubject}} twitter-orange {{/if}} {{#if solved}} twitter-green {{/if}}" style="background-color: #5BC0DE; color:#000000; margin-top:0em;margin-bottom:0.5em">
		<div data-animate data-property="opacity, translateY" data-duration="500" data-from-value="0,-200px" data-to-value="1,0">
			<div class="row twitter">
				<div class="twitter-left twitter-blue {{#if subject}} twitter-red {{/if}} {{#if problemSubject}} twitter-orange {{/if}} {{#if solved}} twitter-green {{/if}}" style="padding-bottom: 0px; padding-right:1em;">
					<div class="ui list">
						{{#if problemSubject}}
						<div class="item" style="font-size: 12pt;">
							<i class="fa fa-book"></i> <strong>Diario</strong>
						</div>
						<div class="item" style="font-size: 12pt;">
							<a href="#" class="label"><i class="fa fa-times"></i>&nbsp;<strong>{{problemSubject}}</strong></a>
						</div>
						{{else}}
						{{#if subject}}
						<div class="item">
							<i class="fa fa-warning"></i>&nbsp;<strong>{{subject}}</strong>
						</div>
						{{else}}
						<div class="item" style="font-size: 12pt;">
							<i class="fa fa-book"></i> <strong>Diario</strong>
						</div>
						{{/if}}
						{{/if}}
						{{#if attachment.isImage}}
						<div class="item">
							<i class="fa fa-file-image-o" style="font-size: 16pt;"></i>
						</div>
						{{else}}
						{{#if attachment}}
						<div class="item">
							<i class="fa fa-file-archive-o" style="font-size: 16pt;"></i>
						</div>
						{{/if}}
						{{/if}}
						<div class="item">
							{{> journalAccordion}}
						</div>
					</div>
				</div>
				<div class="twitter-right" style="position:relative; padding:1em">
					<div  style="padding-bottom: 10px; font-size: 12pt">
						<i class="fa fa-plus-square"></i><strong> {{nurseName}}:</strong> {{message}}
					</div>
					{{#if attachment.isImage}}
					{{#if opened}}
					<div style="padding-bottom: 10px;">
						<p style="text-align: center;">
							<a href="{{attachment.url}}"><img  src="{{attachment.url}}" alt="attachment"></a>
						</p>
					</div>
					{{/if}}
					{{else}}
					{{#if attachment}}
					{{#if opened}}
					<div style="padding-bottom: 10px;">
						<p style="text-align: center;">
							<a href="{{attachment.url}}"><i class="fa fa-file-archive-o"></i> {{attachment.original.name}}</a>
						</p>
					</div>
					{{/if}}
					{{/if}}
					{{/if}}
					<div style=" opacity: 0.5;text-align: right; font-size: 12pt; position:absolute; border-left:1em; border-top:1em; bottom:0.5em; right:0.5em">
						{{#if noPatientSelected}}
						<i class="fa fa-user"></i>
						<strong> {{patientName}}</strong> {{bed}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						{{/if}}
						<i class="fa fa-clock-o"></i> {{date}}
					</div>
				</div>
			</div>
		</div>
	</div>
	{{/AnimateWithVelocity}}
</template>

<template name="journalAccordion">
	<div class="ui accordion">
		<div class="title">
			{{#if opened}}
			<i class="angle double down icon" style="overflow: hidden; white-space: nowrap; align-self:auto; font-size: 17pt; color: #FFFFFF">
			</i>	
			{{else}}
			<i class="angle double right icon" style="font-size: 17pt; color: #FFFFFF">
			</i>
			{{/if}}
		</div>
		<div class="content" style="padding-bottom: 10px;">
			{{#unless problemSubject}}
			{{#unless subject}}
			<select data-native-menu="false" style="color:#000000; margin-bottom:0.5em">
				<option data-problemId="" value="">Seleziona...</option>
				{{#each problems}}
				<option data-problemId="{{_id}}" value="{{subject}}">{{subject}}</option>
				{{/each}}
			</select>
			{{/unless}}
			{{/unless}}
			<div class="item">
				{{#if subject}}
				{{#if solved}}
				<div class="ui inverted twitter-orange button unsolved" style="margin-bottom:0.5em">
					<i class="fa fa-check"></i> Non Risolto
				</div>
				{{else}}
				<div class="ui inverted twitter-green button solved" style="margin-bottom:0.5em">
					<i class="fa fa-check"></i> Risolto
				</div>
				{{/if}}
				{{/if}}
				<div class="ui inverted twitter-red button delete">
					<i class="fa fa-times"></i> Elimina
				</div>
			</div>
		</div>
	</div>
</template>