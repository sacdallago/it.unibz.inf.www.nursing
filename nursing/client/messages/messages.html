<template name="messages">
	{{> loading}}
		<div class="container-fluid">
		<div class="row">
			<div class="span12">
				<div class="hero-unit">
					<h1 class="page-header"> {{language.heading}} <small>{{language.subheading}}</small></h1>
					<ol class="breadcrumb">
						{{#each tags}}
						{{#if type}}
							<li><span class="label label-success tag {{active}}"><strong>{{type}}</strong> ({{count}})</span></li>
						{{else}}
						{{#if patientId}}
							<li><span class="label label-warning tag {{active}}"><strong>{{patientName}}</strong> ({{count}})</span></li>
						{{else}}
							<li><span class="label tag {{active}}"><strong>All</strong> ({{count}})</span></li>
						{{/if}}
						{{/if}}
						{{/each}}
					</ol>
				</div>
			</div>
		</div>
		<div class="row">
			{{> messageitems}}
		</div>
	</div>
	{{#if moreResults}}
	<div id="moreMessages" style="margin-left: 25px; padding-top: 200px;">
		<span class="loading"></span>
	</div>
	{{/if}}
</template>

<template name="messageitems">
	{{#each messages}}
	{{#AnimateWithVelocity}}
	<div data-animate data-property="opacity, translateY" data-duration="500" data-from-value="0,-200px" data-to-value="1,0">
		<div class="span4">
			<div class="card">
				<div class="card-heading image">
					
					<div class="card-heading-header">
						<h3><span class="label label-warning" style="color: white; font-size: 20px;"><strong>{{patientName}}</strong></span>, {{bed}}</h3>
						<span><i class="fa fa-clock-o"></i> {{date}} - Check ins: {{readBy}}</span><br />
						{{#each data}}
						<span class="label label-success" style="color: white; font-size: 10px;">{{type}}</span>
						{{/each}}
					</div>
				</div>
				<div class="card-body">
					<p >
						{{message}}
					</p>
					<p>
						<small><i class="fa fa-plus-square"></i> {{nurseName}}</small> - 
						{{#if attachment}}
						<small><a href="{{attachment}}"><i class="fa fa-file-archive-o"></i>{{attachment}}</a></small>
						{{/if}}
					</p>
				</div>
				<div class="card-bottom" style="text-align: center;">
					<button class="btn btn-success read">
						<i class="fa fa-check"></i> Checkin
					</button>
					<button class="btn btn-danger delete">
						<i class="fa fa-times"></i> Delete
					</button>
   				</div>
			</div>
		</div>
	</div>
	{{/AnimateWithVelocity}}
	{{/each}}
</template>

<!-- Deprecated -->
<template name="minimessages">
	{{#each messages}}
	<li class="message-preview">
		{{#if attachment}}
		<a  href="{{attachment}}">
		<div class="media">
			<span class="pull-left"> <img class="media-object" alt=""> </span>
			<div class="media-body">
				<h5 class="media-heading"><strong>{{name}}</strong></h5>
				<p class="small text-muted">
					<i class="fa fa-clock-o"></i> {{timestamp}}
				</p>
				<p>
					{{message}}
				</p>
				<p>
					<i class="fa fa-file-archive-o"></i> {{attachment}}
				</p>
			</div>
		</div></a>
		{{else}}
		<a>
		<div class="media">
			<span class="pull-left"> <img class="media-object" alt=""> </span>
			<div class="media-body">
				<h5 class="media-heading"><strong>{{name}}</strong></h5>
				<p class="small text-muted">
					<i class="fa fa-clock-o"></i> {{timestamp}}
				</p>
				<p>
					{{message}}
				</p>
			</div>
		</div></a>
		{{/if}}
	</li>
	{{/each}}
</template>