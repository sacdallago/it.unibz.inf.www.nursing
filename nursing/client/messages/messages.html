<template name="messages">
	{{> loading}}
		<div class="container-fluid">
		<div class="row">
			<div class="span12">
				<div class="hero-unit">
					<h1 class="page-header"> {{language.heading}} <small>{{language.subheading}}</small></h1>
					<ol class="breadcrumb">
						{{#each tags}}
						{{#if type}}
							<li><span class="label label-sea tag {{active}}"><strong>{{type}}</strong> ({{count}})</span></li>
						{{else}}
						{{#if patientId}}
							<li><span class="label label-belize tag {{active}}"><strong>{{patientName}}</strong> ({{count}})</span></li>
						{{else}}
							<li><span class="label tag {{active}}"><strong>All</strong> ({{count}})</span></li>
						{{/if}}
						{{/if}}
						{{/each}}
					</ol>
				</div>
			</div>
		</div>
		<div class="row">
			{{> messageitems}}
		</div>
	</div>
	{{#if moreResults}}
	<div id="moreMessages" style="padding-top: 200px;">
		<span class="loading"></span>
	</div>
	{{/if}}
</template>

<template name="messageitems">
	{{#each messages}}
	{{#AnimateWithVelocity}}
	<div data-animate data-property="opacity, translateY" data-duration="500" data-from-value="0,-200px" data-to-value="1,0">
		<div class="span4">
			<div class="card">
				<div class="card-heading">
					
					<div class="card-heading-header">
						<p style="font-size: 22.75px;">
						<strong>{{patientName}}</strong>, {{bed}}<br />
							{{#each data}}
						<span class="label label-sea" style=" font-size: 10px;">{{type}}</span>
						{{/each}}
						</p>
						<span>
						<P>
							<i class="fa fa-clock-o"></i> {{date}} - Check ins: {{readBy}} <br />
							<i class="fa fa-plus-square"></i> {{nurseName}} - 
						{{#if attachment}}
						<a href="{{attachment}}"><i class="fa fa-file-archive-o"></i>{{attachment}}</a>
						{{/if}}
						<br />
						</p>
						</span>
						
					</div>
				</div>
				<div class="card-body">
					<p >
						{{message}}
					</p>
				</div>
				<div class="card-bottom" style="text-align: center;">
					<button class="btn read cardleftbutton">
						<i class="fa fa-check emerald"></i> Checkin
					</button>
					<button class="btn delete cardrightbutton">
						<i class="fa fa-times alizarin"></i> Delete
					</button>
   				</div>
			</div>
		</div>
	</div>
	{{/AnimateWithVelocity}}
	{{/each}}
</template>

<!-- Deprecated -->
<template name="minimessages">
	{{#each messages}}
	<li class="message-preview">
		{{#if attachment}}
		<a  href="{{attachment}}">
		<div class="media">
			<span class="pull-left"> <img class="media-object" alt=""> </span>
			<div class="media-body">
				<h5 class="media-heading"><strong>{{name}}</strong></h5>
				<p class="small text-muted">
					<i class="fa fa-clock-o"></i> {{timestamp}}
				</p>
				<p>
					{{message}}
				</p>
				<p>
					<i class="fa fa-file-archive-o"></i> {{attachment}}
				</p>
			</div>
		</div></a>
		{{else}}
		<a>
		<div class="media">
			<span class="pull-left"> <img class="media-object" alt=""> </span>
			<div class="media-body">
				<h5 class="media-heading"><strong>{{name}}</strong></h5>
				<p class="small text-muted">
					<i class="fa fa-clock-o"></i> {{timestamp}}
				</p>
				<p>
					{{message}}
				</p>
			</div>
		</div></a>
		{{/if}}
	</li>
	{{/each}}
</template>